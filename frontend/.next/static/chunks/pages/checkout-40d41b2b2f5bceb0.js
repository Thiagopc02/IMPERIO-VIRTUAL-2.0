(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{5248:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return r(3410)}])},3410:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(5893),a=r(7294),o=r(3285),i=r(5346),l=r(7066);function s(){let{cartItems:e,removeItemFromCart:t,clearCart:r}=(0,a.useContext)(o.A),[s,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1),[h,b]=(0,a.useState)(!1),[x,y]=(0,a.useState)({name:"",email:"",phone:"",street:"",number:"",sector:"",complement:"",paymentMethod:"pix"}),f=e=>{let{id:t,value:r}=e.target;y(e=>({...e,[t]:r}))},g=async t=>{t.preventDefault(),b(!0);let n=e.map(e=>({product_id:e.id,name:e.name,quantity:e.quantity,price:"unit"===e.type?e.unit_price:e.box_price,type:e.type})),a="Retirada no estabelecimento";u||(a="".concat(x.street,", N\xfamero: ").concat(x.number,", Setor: ").concat(x.sector,", Complemento: ").concat(x.complement));let o={items:n,total:e.reduce((e,t)=>e+("unit"===t.type?t.unit_price*t.quantity:t.box_price*t.quantity),0),address:a,paymentMethod:x.paymentMethod};try{let e=await l.Z.post("http://localhost:5000/api/orders",o);if(201===e.status)b(!1),c(!1),m(!0),r();else throw Error("Falha ao criar o pedido")}catch(e){console.error("Erro ao finalizar o pedido:",e),b(!1),alert("Erro ao finalizar o pedido, tente novamente.")}},j=()=>{let t=e.map(e=>"".concat(e.quantity,"x ").concat(e.name)).join(", "),r=e.reduce((e,t)=>e+("unit"===t.type?parseFloat(t.unit_price):parseFloat(t.box_price))*t.quantity,0).toFixed(2),n=u?"Retirada no estabelecimento":x.street,a="Ol\xe1, gostaria de fazer um pedido.\nProdutos: ".concat(t,"\nTotal: R$").concat(r,"\nEndere\xe7o: ").concat(n),o="https://wa.me/5562996916206?text=".concat(encodeURIComponent(a));window.location.href=o},v=e.reduce((e,t)=>e+("unit"===t.type?t.unit_price*t.quantity:t.box_price*t.quantity),0).toFixed(2);return(0,n.jsxs)("div",{className:"max-w-4xl mx-auto mt-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Carrinho de Compras"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,n.jsx)("div",{children:0===e.length?(0,n.jsx)("p",{children:"Seu carrinho est\xe1 vazio."}):e.map((e,r)=>(0,n.jsxs)("div",{className:"border rounded p-4 mb-4 flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-bold text-white",children:e.name}),(0,n.jsxs)("p",{className:"text-gray-600",children:[e.quantity," x ","unit"===e.type?"Unidade":"Caixa"]})]}),(0,n.jsxs)("div",{className:"text-right flex items-center",children:[(0,n.jsxs)("p",{className:"text-lg font-semibold text-yellow-500 mr-4",children:["R$ ",("unit"===e.type?parseFloat(e.unit_price):parseFloat(e.box_price)).toFixed(2)]}),(0,n.jsxs)("button",{onClick:()=>t(e.id,e.type),className:"bg-red-500 text-white flex items-center px-3 py-2 rounded hover:bg-red-600 transition-colors",children:[(0,n.jsx)(i.Xm5,{className:"mr-2"}),"Remover"]})]})]},r))}),(0,n.jsxs)("div",{className:"border rounded p-4 bg-gradient-to-r from-yellow-400 to-yellow-600 shadow-md text-white",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Resumo da Compra"}),(0,n.jsxs)("p",{children:["Total de Itens: ",e.length]}),(0,n.jsxs)("p",{children:["Total: R$ ",v]}),(0,n.jsx)("button",{onClick:()=>{c(!0)},className:"w-full bg-blue-600 text-white py-2 mt-4 rounded hover:bg-blue-700 transition-colors",children:"Finalizar Compra"})]})]}),s&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:(0,n.jsxs)("div",{className:"bg-gray-800 p-4 rounded shadow-lg text-white max-w-md w-full",children:[" ",(0,n.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Finalizar Compra"}),(0,n.jsxs)("form",{onSubmit:g,children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"name",className:"block text-sm",children:"Nome:"}),(0,n.jsx)("input",{type:"text",id:"name",className:"w-full p-2 border border-gray-500 rounded bg-gray-700 text-white",value:x.name,onChange:f,required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm",children:"Email:"}),(0,n.jsx)("input",{type:"email",id:"email",className:"w-full p-2 border border-gray-500 rounded bg-gray-700 text-white",value:x.email,onChange:f,required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"phone",className:"block text-sm",children:"N\xfamero Celular:"}),(0,n.jsx)("input",{type:"tel",id:"phone",className:"w-full p-2 border border-gray-500 rounded bg-gray-700 text-white",value:x.phone,onChange:f,required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Formas de Pagamento"}),(0,n.jsxs)("select",{className:"w-full p-2 border border-gray-500 rounded bg-gray-700 text-white",id:"paymentMethod",value:x.paymentMethod,onChange:f,children:[(0,n.jsx)("option",{value:"pix",children:"Pix"}),(0,n.jsx)("option",{value:"dinheiro",children:"Dinheiro"}),(0,n.jsx)("option",{value:"debito",children:"Cart\xe3o de D\xe9bito"}),(0,n.jsx)("option",{value:"credito",children:"Cart\xe3o de Cr\xe9dito"})]})]}),(0,n.jsxs)("div",{className:"flex items-center mb-4",children:[(0,n.jsx)("input",{type:"checkbox",id:"pickup",className:"mr-2",checked:u,onChange:e=>p(e.target.checked)}),(0,n.jsx)("label",{htmlFor:"pickup",children:"Retirar no estabelecimento"})]}),!u&&(0,n.jsxs)("div",{id:"addressFields",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"street",className:"block text-sm",children:"Rua:"}),(0,n.jsx)("input",{type:"text",id:"street",className:"w-full p-2 border border-gray-500 rounded bg-gray-700 text-white",value:x.street,onChange:f,required:!0})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"complement",className:"block text-sm",children:"Complemento:"}),(0,n.jsx)("input",{type:"text",id:"complement",className:"w-full p-2 border border-gray-500 rounded bg-gray-700 text-white",value:x.complement,onChange:f})]}),(0,n.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"number",className:"block text-sm",children:"N\xfamero:"}),(0,n.jsx)("input",{type:"text",id:"number",className:"w-full p-2 border border-gray-500 rounded bg-gray-700 text-white",value:x.number,onChange:f,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"sector",className:"block text-sm",children:"Setor:"}),(0,n.jsx)("input",{type:"text",id:"sector",className:"w-full p-2 border border-gray-500 rounded bg-gray-700 text-white",value:x.sector,onChange:f,required:!0})]})]})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 mt-4 rounded hover:bg-green-700 transition-colors",style:{fontFamily:"Impact, sans-serif"},children:h?"Carregando...":"Concluir"})]}),(0,n.jsx)("button",{onClick:j,className:"w-full bg-blue-600 text-white py-2 mt-2 rounded hover:bg-blue-700 transition-colors",children:"Confirme Seu Pedido Por WhatsApp"}),(0,n.jsx)("button",{onClick:()=>c(!1),className:"mt-4 text-red-500",children:"Cancelar"})]})}),d&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg max-w-lg w-full",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Pedido confirmado!"}),(0,n.jsx)("p",{className:"mb-4",children:"Seu pedido foi registrado com sucesso."}),(0,n.jsx)("button",{onClick:j,className:"mt-4 px-4 py-2 bg-green-600 text-white",children:"Enviar pedido no WhatsApp"}),(0,n.jsx)("button",{onClick:()=>m(!1),className:"mt-4 px-4 py-2 bg-gray-600 text-white",children:"Fechar"})]})})]})}},7796:function(e,t,r){"use strict";r.d(t,{w_:function(){return d}});var n=r(7294),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=n.createContext&&n.createContext(a),i=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>n.createElement(m,l({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var r,{attr:a,size:o,title:s}=e,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,i),m=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),s&&n.createElement("title",null,s),e.children)};return void 0!==o?n.createElement(o.Consumer,null,e=>t(e)):t(a)}}},function(e){e.O(0,[365,66,888,774,179],function(){return e(e.s=5248)}),_N_E=e.O()}]);